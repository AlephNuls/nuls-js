<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction | NULS JS</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/nuls-js/assets/css/0.styles.7ec91cca.css" as="style"><link rel="preload" href="/nuls-js/assets/js/app.0630f323.js" as="script"><link rel="preload" href="/nuls-js/assets/js/22.4785aaf9.js" as="script"><link rel="preload" href="/nuls-js/assets/js/8.049b43fc.js" as="script"><link rel="prefetch" href="/nuls-js/assets/js/10.41ea4196.js"><link rel="prefetch" href="/nuls-js/assets/js/2.353c5d13.js"><link rel="prefetch" href="/nuls-js/assets/js/3.c6084db5.js"><link rel="prefetch" href="/nuls-js/assets/js/4.bde83086.js"><link rel="prefetch" href="/nuls-js/assets/js/5.a01c4280.js"><link rel="prefetch" href="/nuls-js/assets/js/6.3d046691.js"><link rel="prefetch" href="/nuls-js/assets/js/7.600faec8.js"><link rel="prefetch" href="/nuls-js/assets/js/9.cbe8387d.js"><link rel="prefetch" href="/nuls-js/assets/js/11.6110d515.js"><link rel="prefetch" href="/nuls-js/assets/js/12.a0a3e774.js"><link rel="prefetch" href="/nuls-js/assets/js/13.8df581d0.js"><link rel="prefetch" href="/nuls-js/assets/js/14.3e949b72.js"><link rel="prefetch" href="/nuls-js/assets/js/15.9dcf23b2.js"><link rel="prefetch" href="/nuls-js/assets/js/16.d48bb98a.js"><link rel="prefetch" href="/nuls-js/assets/js/17.02992157.js"><link rel="prefetch" href="/nuls-js/assets/js/18.15334fe6.js"><link rel="prefetch" href="/nuls-js/assets/js/19.2cee8e85.js"><link rel="prefetch" href="/nuls-js/assets/js/20.0bf2ffc1.js"><link rel="prefetch" href="/nuls-js/assets/js/21.475b4151.js">
    <link rel="stylesheet" href="/nuls-js/assets/css/0.styles.7ec91cca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nuls-js/" class="home-link router-link-active"><!----> <span class="site-name">NULS JS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/nuls-js/" class="nav-link">Home</a></div><div class="nav-item"><a href="/nuls-js/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://CCC-NULS.github.io/nuls-js/typedoc/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API Reference
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/CCC-NULS/nuls-js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/nuls-js/" class="nav-link">Home</a></div><div class="nav-item"><a href="/nuls-js/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://CCC-NULS.github.io/nuls-js/typedoc/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API Reference
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/CCC-NULS/nuls-js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/nuls-js/guide/" class="sidebar-link">Getting Started</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Account</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/nuls-js/guide/block/" class="sidebar-link">Block</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Transaction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Smart Contracts</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nuls-js/guide/smart-contract/" class="active sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nuls-js/guide/smart-contract/#create-an-instance" class="sidebar-link">Create an instance</a></li><li class="sidebar-sub-header"><a href="/nuls-js/guide/smart-contract/#the-info-method" class="sidebar-link">The &quot;info&quot; method</a></li><li class="sidebar-sub-header"><a href="/nuls-js/guide/smart-contract/#gas-price-and-gas-limit" class="sidebar-link">Gas Price and Gas Limit</a></li></ul></li><li><a href="/nuls-js/guide/smart-contract/view-method.html" class="sidebar-link">View methods</a></li><li><a href="/nuls-js/guide/smart-contract/payable-method.html" class="sidebar-link">Payable methods</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="introduction"><a href="#introduction" aria-hidden="true" class="header-anchor">#</a> Introduction</h1> <p><strong>NULS JS</strong> provides a simple api with all the necesary to interact with an smart contract deployed on the NULS network.</p> <h2 id="create-an-instance"><a href="#create-an-instance" aria-hidden="true" class="header-anchor">#</a> Create an instance</h2> <p>In order to use this api, the first thing we need to do is to create an instance of the contract. This can be done calling the static method <code>.at(address: string)</code> of the <code>Contract</code> class, and providing the public address of the smart contract deployed in the network.</p> <p>We are going to use as an example the lottery contract deployed in the testnet whose address is <code>TTb3ASyCBbJ6KL1PUS4gh9jWjNi3RvTK</code>. We can take a look at the source code in <a href="https://github.com/amalcaraz/nuls-lottery-smartcontract/blob/master/src/com/gmail/amalcaraz89/lottery/LotteryContract.java#L19" target="_blank" rel="noopener noreferrer">this link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Contract<span class="token punctuation">,</span> ContractConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nuls-js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> contractAddress <span class="token operator">=</span> <span class="token string">'TTb3ASyCBbJ6KL1PUS4gh9jWjNi3RvTK'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> contractConfig<span class="token punctuation">:</span> ContractConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  api<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    host<span class="token punctuation">:</span> <span class="token string">'https://explorer.nuls.services'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> Contract<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>contractAddress<span class="token punctuation">,</span> contractConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="the-info-method"><a href="#the-info-method" aria-hidden="true" class="header-anchor">#</a> The &quot;info&quot; method</h2> <p>Every instance of the <code>Contract</code> class has an <code>.info()</code> method that give us information about the contract public interface: All the method availables, the arguments that every method accept, the type returned by the method, the kind of the method: <code>payable</code> or <code>view</code>, and the events.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>contract<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Smart Lottery v1.0.0'</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    createLottery<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'createLottery'</span><span class="token punctuation">,</span>
      desc<span class="token punctuation">:</span> <span class="token string">'(String title, String desc, double ticketPrice, long startTime, long endTime, int minParticipants, boolean secondPrizes) return Lcom/gmail/amalcaraz89/lottery/model/Lottery;'</span><span class="token punctuation">,</span>
      args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Array</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      returnArg<span class="token punctuation">:</span> <span class="token string">'Lcom/gmail/amalcaraz89/lottery/model/Lottery;'</span><span class="token punctuation">,</span>
      view<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      event<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      payable<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    buyTickets<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'buyTickets'</span><span class="token punctuation">,</span>
      desc<span class="token punctuation">:</span> <span class="token string">'(long lotteryId) return BigInteger'</span><span class="token punctuation">,</span>
      args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">Array</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      returnArg<span class="token punctuation">:</span> <span class="token string">'BigInteger'</span><span class="token punctuation">,</span>
      view<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      event<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      payable<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    viewLotteryList<span class="token punctuation">:</span> <span class="token punctuation">{</span> 
      name<span class="token punctuation">:</span> <span class="token string">'viewLotteryList'</span><span class="token punctuation">,</span>
      desc<span class="token punctuation">:</span> <span class="token string">'() return Ljava/util/List;'</span><span class="token punctuation">,</span>
      args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      returnArg<span class="token punctuation">:</span> <span class="token string">'Ljava/util/List;'</span><span class="token punctuation">,</span>
      view<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      event<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      payable<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The contract instance that we have created, have all this methods availables to be called. We can see some examples in the next chapters of this guide.</p> <h2 id="gas-price-and-gas-limit"><a href="#gas-price-and-gas-limit" aria-hidden="true" class="header-anchor">#</a> Gas Price and Gas Limit</h2> <p>With the inclusion of smart contracts in the NULS ecosystem there are two new concepts that we have to take into account when we use this api: <strong>gas price</strong>, and <strong>gas limit</strong>.</p> <p>Like in a car engine, the <strong>gas</strong> is the resource that we need to consume if we want to start moving. The NULS virtual machine is an engine that runs the smart contract code for us, so we need to fill it's deposit with the needed amount of gas to run the code.</p> <p>The <strong>gas price</strong> is just the price that we are willing to pay for each unit of gas that the transaction will consume doing the call. The default <strong>gas price</strong> is <strong>25 NA's</strong> <em>(0.00000025 NULS)</em>.</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Every line of code will consume some gas that will be deducted form the total gas sent in the method invocation (<a href="http://dev.nuls.io/smartContract/smartContractFee.html" target="_blank" rel="noopener noreferrer">more info here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>).</p></div> <p>So the total fee will be the summation of the <strong>common transaction size fee</strong> + (<strong>gas price</strong> * <strong>gas consumed</strong> calling the method), the difference between the sent <strong>gas limit</strong> and the <strong>gas consumed</strong> will be refunded to the sender account after validating the transaction. But what happens when there is a bug in the contract method, or some malicious code? The execution could fall into an infinite loop and waste all the funds from our account as <strong>gas</strong> fee...</p> <p>To protect us from this undesired situations we can set up a <strong>gas limit</strong> in each transaction, so that way we can know in advance the maximum amount of NULS that will be spent if something goes wrong. The default <strong>gas limit</strong> in each transaction is <strong>10000000 NA's</strong> <em>(0.1 NULS)</em>.</p> <p>We only pay gas by calling <strong>payable</strong> smart contract methods, that are the ones that make a change of the smart contract state. In the other hand, <strong>view</strong> methods are totally free of fee.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/CCC-NULS/nuls-js/edit/master/docs/guide/smart-contract/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/nuls-js/guide/transaction/contract-call.html" class="prev">
          Contract Call Transaction
        </a></span> <span class="next"><a href="/nuls-js/guide/smart-contract/view-method.html">
          View methods
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/nuls-js/assets/js/app.0630f323.js" defer></script><script src="/nuls-js/assets/js/22.4785aaf9.js" defer></script><script src="/nuls-js/assets/js/8.049b43fc.js" defer></script>
  </body>
</html>
